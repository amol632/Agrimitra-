<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AgriMitra AI Chat</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f2f2f2;
}
.chat-box {
    width: 90%;
    max-width: 500px;
    background: white;
    margin: 20px auto;
    padding: 15px;
    border-radius: 10px;
}
.messages {
    height: 350px;
    overflow-y: auto;
    border: 1px solid #ddd;
    padding: 10px;
    border-radius: 8px;
    background: #fafafa;
}
.message {
    margin-bottom: 12px;
}
.user {
    text-align: right;
    color: blue;
}
.bot {
    text-align: left;
    color: green;
}
input {
    width: 70%;
    padding: 10px;
    margin-top: 10px;
}
button {
    padding: 10px 15px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 5px;
}
</style>
</head>

<body>

<div class="chat-box">
    <h2>üåæ AgriMitra AI Chat</h2>

    <div class="messages" id="messages"></div>

    <input type="text" id="userInput" placeholder="‡§ï‡§æ‡§Ø ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•Ç?" />
    <button onclick="sendMessage()">Send</button>
</div>

<script>
async function sendMessage() {
    const input = document.getElementById("userInput");
    const msg = input.value.trim();
    if (!msg) return;

    addMessage(msg, "user");
    input.value = "";

    const apiKey = "YOUR_API_KEY_HERE";  // üî• ‡§á‡§•‡•á Gemini API Key ‡§ü‡§æ‡§ï‡§æ

    try {
        const response = await fetch(
            "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=" + apiKey,
            {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ role: "user", parts: [{ text: msg }] }]
                })
            }
        );

        const data = await response.json();
        const botReply = data.candidates?.[0]?.content?.parts?.[0]?.text || "‡§ï‡•ç‡§∑‡§Æ‡§∏‡•ç‡§µ, ‡§Æ‡§≤‡§æ ‡§∏‡§Æ‡§ú‡§≤‡§Ç ‡§®‡§æ‡§π‡•Ä.";

        addMessage(botReply, "bot");
    } catch (err) {
        addMessage("üö´ Error: API Key ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§§‡§™‡§æ‡§∏‡§æ", "bot");
        console.error(err);
    }
}

function addMessage(text, sender) {
    const box = document.getElementById("messages");
    const div = document.createElement("div");
    div.className = "message " + sender;
    div.innerHTML = text;
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
}
</script>

</body>
</html>
