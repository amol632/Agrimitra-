<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgriMitra AI Chat</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f3f6f9; height: 100vh; display: flex; flex-direction: column; }
    header { background: linear-gradient(135deg,#2e7d32,#66bb6a); color: #fff; text-align: center; padding: 15px; font-size: 20px; font-weight: bold; }
    #chat { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
    .msg { max-width: 75%; padding: 10px 14px; border-radius: 15px; font-size: 15px; line-height: 1.4; }
    .user { background: #c8e6c9; align-self: flex-end; }
    .bot { background: #fff; align-self: flex-start; border: 1px solid #ddd; }
    #inputArea { display: flex; padding: 10px; background: #fff; border-top: 1px solid #ccc; }
    input { flex: 1; padding: 10px; border-radius: 20px; border: 1px solid #ccc; outline: none; }
    button { margin-left: 8px; border-radius: 50%; border: none; background: #2e7d32; color: #fff; width: 45px; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>
<header>üåæ AgriMitra AI ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø‡§ï</header>

<div id="chat">
  <div class="msg bot">‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞ Amol üëã ‡§Æ‡•Ä ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§∂‡•á‡§§‡•Ä AI ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.</div>
</div>

<div id="inputArea">
  <input type="text" id="text" placeholder="‡§∂‡•á‡§§‡•Ä ‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§µ‡§ø‡§ö‡§æ‡§∞‡§æ...">
  <button onclick="send()">‚û§</button>
</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("text");

function add(text, type){
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function send(){
  const msg = input.value.trim();
  if(!msg) return;

  add(msg, "user");
  input.value = "";

  try {
    const res = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg })
    });

    const data = await res.json();
    add(data.reply || "‡§â‡§§‡•ç‡§§‡§∞ ‡§Æ‡§ø‡§≥‡§æ‡§≤‡•á ‡§®‡§æ‡§π‡•Ä.", "bot");

  } catch(e){
    add("‚ùå Server error. Try again.", "bot");
  }
}
</script>
</body>
</html>
