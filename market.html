<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§≠‡§æ‡§µ</title>
  <style>
    body {
      font-family: 'Noto Sans Devanagari', sans-serif;
      background: #ffe4ec;
      margin: 0;
      padding: 20px;
    }
    h2 {
      text-align: center;
      color: #d63384;
    }
    .container {
      max-width: 600px;
      margin: auto;
    }
    select, button {
      padding: 10px;
      margin: 5px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
    }
    select {
      width: 70%;
    }
    button {
      background: #d63384;
      color: white;
      cursor: pointer;
    }
    .card {
      background: white;
      margin: 15px 0;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .card h3 {
      margin: 0;
      color: #d63384;
    }
  </style>
</head>
<body>
  <h2>üìä ‡§ú‡§ø‡§≤‡•ç‡§π‡§æ‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§≠‡§æ‡§µ</h2>
  <div class="container">
    <select id="districtSelect">
      <option value="Ahmednagar">‡§Ö‡§π‡§Æ‡§¶‡§®‡§ó‡§∞</option>
      <option value="Akola">‡§Ö‡§ï‡•ã‡§≤‡§æ</option>
      <option value="Amravati">‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä</option>
      <option value="Aurangabad">‡§î‡§∞‡§Ç‡§ó‡§æ‡§¨‡§æ‡§¶</option>
      <option value="Beed">‡§¨‡•Ä‡§°</option>
      <option value="Bhandara">‡§≠‡§Ç‡§°‡§æ‡§∞‡§æ</option>
      <option value="Buldhana">‡§¨‡•Å‡§≤‡§¢‡§æ‡§£‡§æ</option>
      <option value="Chandrapur">‡§ö‡§Ç‡§¶‡•ç‡§∞‡§™‡•Ç‡§∞</option>
      <option value="Dhule">‡§ß‡•Å‡§≥‡•á</option>
      <option value="Gadchiroli">‡§ó‡§°‡§ö‡§ø‡§∞‡•ã‡§≤‡•Ä</option>
      <option value="Gondia">‡§ó‡•ã‡§Ç‡§¶‡§ø‡§Ø‡§æ</option>
      <option value="Hingoli">‡§π‡§ø‡§Ç‡§ó‡•ã‡§≤‡•Ä</option>
      <option value="Jalgaon">‡§ú‡§≥‡§ó‡§æ‡§µ</option>
      <option value="Jalna">‡§ú‡§æ‡§≤‡§®‡§æ</option>
      <option value="Kolhapur">‡§ï‡•ã‡§≤‡•ç‡§π‡§æ‡§™‡•Ç‡§∞</option>
      <option value="Latur">‡§≤‡§æ‡§§‡•Ç‡§∞</option>
      <option value="Mumbai">‡§Æ‡•Å‡§Ç‡§¨‡§à</option>
      <option value="Nagpur">‡§®‡§æ‡§ó‡§™‡•Ç‡§∞</option>
      <option value="Nanded">‡§®‡§æ‡§Ç‡§¶‡•á‡§°</option>
      <option value="Nandurbar">‡§®‡§Ç‡§¶‡•Å‡§∞‡§¨‡§æ‡§∞</option>
      <option value="Nashik">‡§®‡§æ‡§∂‡§ø‡§ï</option>
      <option value="Osmanabad">‡§â‡§∏‡•ç‡§Æ‡§æ‡§®‡§æ‡§¨‡§æ‡§¶</option>
      <option value="Palghar">‡§™‡§æ‡§≤‡§ò‡§∞</option>
      <option value="Parbhani">‡§™‡§∞‡§≠‡§£‡•Ä</option>
      <option value="Pune">‡§™‡•Å‡§£‡•á</option>
      <option value="Raigad">‡§∞‡§æ‡§Ø‡§ó‡§°</option>
      <option value="Ratnagiri">‡§∞‡§§‡•ç‡§®‡§æ‡§ó‡§ø‡§∞‡•Ä</option>
      <option value="Sangli">‡§∏‡§æ‡§Ç‡§ó‡§≤‡•Ä</option>
      <option value="Satara">‡§∏‡§æ‡§§‡§æ‡§∞‡§æ</option>
      <option value="Sindhudurg">‡§∏‡§ø‡§Ç‡§ß‡•Å‡§¶‡•Å‡§∞‡•ç‡§ó</option>
      <option value="Solapur">‡§∏‡•ã‡§≤‡§æ‡§™‡•Ç‡§∞</option>
      <option value="Thane">‡§†‡§æ‡§£‡•á</option>
      <option value="Wardha">‡§µ‡§∞‡•ç‡§ß‡§æ</option>
      <option value="Washim">‡§µ‡§æ‡§∂‡•Ä‡§Æ</option>
      <option value="Yavatmal">‡§Ø‡§µ‡§§‡§Æ‡§æ‡§≥</option>
    </select>
    <button onclick="getMarketData()">‡§≠‡§æ‡§µ ‡§™‡§π‡§æ</button>

    <div id="results"></div>
  </div>

  <script>
    // English -> ‡§Æ‡§∞‡§æ‡§†‡•Ä dictionary (‡§∂‡•â‡§∞‡•ç‡§ü ‡§†‡•á‡§µ‡§≤‡§æ ‡§Ü‡§π‡•á, ‡§Ü‡§ß‡•Ä‡§ö‡§æ ‡§Æ‡•ã‡§†‡§æ dictionary ‡§µ‡§æ‡§™‡§∞‡§§‡§æ ‡§Ø‡•á‡§à‡§≤)
    const cropNames = {
      "Onion": "‡§ï‡§æ‡§Ç‡§¶‡§æ",
      "Potato": "‡§¨‡§ü‡§æ‡§ü‡§æ",
      "Tomato": "‡§ü‡•ã‡§Æ‡•Ö‡§ü‡•ã",
      "Brinjal": "‡§µ‡§æ‡§Ç‡§ó‡•Ä",
      "Okra": "‡§≠‡•á‡§Ç‡§°‡•Ä",
      "Cabbage": "‡§ï‡•ã‡§¨‡•Ä",
      "Cauliflower": "‡§´‡•Å‡§≤‡§ï‡•ã‡§¨‡•Ä",
      "Green Gram (Moong)(Whole)": "‡§Æ‡•Ç‡§ó (‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£)",
      "Jowar(Sorghum)": "‡§ú‡•ç‡§µ‡§æ‡§∞‡•Ä",
      "Maize": "‡§Æ‡§ï‡§æ",
      "Wheat": "‡§ó‡§π‡•Ç",
      "Rice": "‡§§‡§æ‡§Ç‡§¶‡•Ç‡§≥"
      // ‡§¨‡§æ‡§ï‡•Ä ‡§™‡§ø‡§ï‡•á/‡§≠‡§æ‡§ú‡•ç‡§Ø‡§æ add ‡§ï‡§∞‡§§‡§æ ‡§Ø‡•á‡§§‡•Ä‡§≤
    };

    function getTodayDate() {
      const today = new Date();
      const dd = String(today.getDate()).padStart(2, '0');
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const yyyy = today.getFullYear();
      return dd + '/' + mm + '/' + yyyy; // API date format
    }

    async function getMarketData() {
      const district = document.getElementById("districtSelect").value;
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "‚è≥ ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...";

      const today = getTodayDate();

      try {
        const response = await fetch(
          `https://api.data.gov.in/resource/35985678-0d79-46b4-9ed6-6f13308a1d24?api-key=579b464db66ec23bdd0000019f0ca214d5c34d7476b4ffb1b25324e1&format=json&limit=100&filters[District]=${district}&filters[Arrival_Date]=${today}`
        );
        const data = await response.json();

        if (!data.records || data.records.length === 0) {
          resultsDiv.innerHTML = `üö´ ${district} ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§ú (${today}) ‡§°‡•á‡§ü‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä.`;
          return;
        }

        resultsDiv.innerHTML = "";
        data.records.forEach(item => {
          const crop = cropNames[item.Commodity] || item.Commodity;
          const card = `
            <div class="card">
              <h3>${crop}</h3>
              <p><b>‡§¨‡§æ‡§ú‡§æ‡§∞:</b> ${item.Market}</p>
              <p><b>‡§ï‡§ø‡§Æ‡§æ‡§® ‡§≠‡§æ‡§µ:</b> ‚Çπ${item.Min_Price}</p>
              <p><b>‡§ï‡§Æ‡§æ‡§≤ ‡§≠‡§æ‡§µ:</b> ‚Çπ${item.Max_Price}</p>
              <p><b>‡§∏‡§∞‡§æ‡§∏‡§∞‡•Ä ‡§≠‡§æ‡§µ:</b> ‚Çπ${item.Modal_Price}</p>
              <p><b>‡§§‡§æ‡§∞‡•Ä‡§ñ:</b> ${item.Arrival_Date}</p>
            </div>
          `;
          resultsDiv.innerHTML += card;
        });

      } catch (error) {
        resultsDiv.innerHTML = "‚ö†Ô∏è ‡§ï‡§æ‡§π‡•Ä‡§§‡§∞‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á.";
        console.error(error);
      }
    }
  </script>
</body>
</html>
